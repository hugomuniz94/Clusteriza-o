{"version":3,"file":"dacFxSummaryPage.js","sourceRoot":"../../../src","sources":["wizard/pages/dacFxSummaryPage.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the Source EULA. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as azdata from 'azdata';\nimport * as loc from '../../localizedConstants';\nimport { DacFxDataModel } from '../api/models';\nimport { DataTierApplicationWizard, Operation } from '../dataTierApplicationWizard';\nimport { BasePage } from '../api/basePage';\n\nexport class DacFxSummaryPage extends BasePage {\n\tprivate form: azdata.FormContainer;\n\tprivate table: azdata.TableComponent;\n\tprivate loader: azdata.LoadingComponent;\n\tpublic data: string[][];\n\n\tpublic constructor(instance: DataTierApplicationWizard, wizardPage: azdata.window.WizardPage, model: DacFxDataModel, view: azdata.ModelView) {\n\t\tsuper(instance, wizardPage, model, view);\n\t}\n\n\tasync start(): Promise<boolean> {\n\t\tthis.table = this.view.modelBuilder.table().withProperties({\n\t\t\ttitle: loc.summaryTableTitle\n\t\t}).component();\n\t\tthis.loader = this.view.modelBuilder.loadingComponent().withItem(this.table).component();\n\t\tthis.form = this.view.modelBuilder.formContainer().withFormItems(\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tcomponent: this.table,\n\t\t\t\t\ttitle: ''\n\t\t\t\t}\n\t\t\t]\n\t\t).component();\n\t\tawait this.view.initializeModel(this.form);\n\t\treturn true;\n\t}\n\n\tasync onPageEnter(): Promise<boolean> {\n\t\tawait this.populateTable();\n\t\tthis.loader.loading = false;\n\t\tif (this.model.upgradeExisting && this.instance.selectedOperation === Operation.deploy) {\n\t\t\tthis.instance.wizard.generateScriptButton.hidden = false;\n\t\t}\n\n\t\tthis.instance.wizard.doneButton.focused = true;\n\n\t\treturn true;\n\t}\n\n\tasync onPageLeave(): Promise<boolean> {\n\t\tthis.instance.wizard.generateScriptButton.hidden = true;\n\t\treturn true;\n\t}\n\n\tpublic setupNavigationValidator(): void {\n\t\tthis.instance.registerNavigationValidator(() => {\n\t\t\tif (this.loader.loading) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t}\n\n\tprivate async populateTable(): Promise<void> {\n\t\tlet targetServer = loc.targetServer;\n\t\tlet targetDatabase = loc.targetDatabase;\n\t\tlet sourceServer = loc.sourceServer;\n\t\tlet sourceDatabase = loc.sourceDatabase;\n\t\tlet fileLocation = loc.fileLocation;\n\n\t\tswitch (this.instance.selectedOperation) {\n\t\t\tcase Operation.deploy: {\n\t\t\t\tthis.data = [\n\t\t\t\t\t[targetServer, this.model.serverName],\n\t\t\t\t\t[fileLocation, this.model.filePath],\n\t\t\t\t\t[targetDatabase, this.model.database]];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Operation.extract: {\n\t\t\t\tthis.data = [\n\t\t\t\t\t[sourceServer, this.model.serverName],\n\t\t\t\t\t[sourceDatabase, this.model.database],\n\t\t\t\t\t[loc.version, this.model.version],\n\t\t\t\t\t[fileLocation, this.model.filePath]];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Operation.import: {\n\t\t\t\tthis.data = [\n\t\t\t\t\t[targetServer, this.model.serverName],\n\t\t\t\t\t[fileLocation, this.model.filePath],\n\t\t\t\t\t[targetDatabase, this.model.database]];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Operation.export: {\n\t\t\t\tthis.data = [\n\t\t\t\t\t[sourceServer, this.model.serverName],\n\t\t\t\t\t[sourceDatabase, this.model.database],\n\t\t\t\t\t[fileLocation, this.model.filePath]];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tawait this.table.updateProperties({\n\t\t\tdata: this.data,\n\t\t\tcolumns: [\n\t\t\t\t{\n\t\t\t\t\tvalue: loc.setting,\n\t\t\t\t\tcssClass: 'align-with-header'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: loc.value,\n\t\t\t\t\tcssClass: 'align-with-header'\n\t\t\t\t}],\n\t\t\twidth: 700,\n\t\t\theight: 200,\n\t\t\tmoveFocusOutWithTab: true\n\t\t});\n\t}\n}\n"]}