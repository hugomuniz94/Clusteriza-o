{"version":3,"file":"deployPlanPage.js","sourceRoot":"../../../src","sources":["wizard/pages/deployPlanPage.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the Source EULA. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as azdata from 'azdata';\nimport * as parser from 'htmlparser2';\nimport * as loc from '../../localizedConstants';\nimport { DacFxDataModel } from '../api/models';\nimport { DataTierApplicationWizard } from '../dataTierApplicationWizard';\nimport { DacFxConfigPage } from '../api/dacFxConfigPage';\n\nenum deployPlanXml {\n\tAlertElement = 'Alert',\n\tOperationElement = 'Operation',\n\tItemElement = 'Item',\n\tNameAttribute = 'Name',\n\tValueAttribute = 'Value',\n\tTypeAttribute = 'Type',\n\tIdAttribute = 'Id',\n\tDataIssueAttribute = 'DataIssue'\n}\n\nclass TableObject {\n\toperation: string;\n\tobject: string;\n\ttype: string;\n\tdataloss: boolean;\n}\n\nclass DeployPlanResult {\n\tcolumnData: Array<Array<string>>;\n\tdataLossAlerts: Set<string>;\n}\n\nexport class DeployPlanPage extends DacFxConfigPage {\n\tprivate formBuilder: azdata.FormBuilder;\n\tprivate form: azdata.FormContainer;\n\tprivate table: azdata.TableComponent;\n\tprivate loader: azdata.LoadingComponent;\n\tprivate dataLossCheckbox: azdata.CheckBoxComponent;\n\tprivate dataLossText: azdata.TextComponent;\n\tprivate dataLossComponentGroup: azdata.FormComponentGroup;\n\tprivate noDataLossTextComponent: azdata.FormComponent;\n\n\tpublic constructor(instance: DataTierApplicationWizard, wizardPage: azdata.window.WizardPage, model: DacFxDataModel, view: azdata.ModelView) {\n\t\tsuper(instance, wizardPage, model, view);\n\t}\n\n\tasync start(): Promise<boolean> {\n\t\tthis.table = this.view.modelBuilder.table().withProperties({\n\t\t\tariaLabel: loc.deployPlanTableTitle\n\t\t}).component();\n\t\tthis.loader = this.view.modelBuilder.loadingComponent().withItem(this.table).component();\n\t\tthis.dataLossComponentGroup = await this.createDataLossComponents();\n\t\tthis.noDataLossTextComponent = await this.createNoDataLossText();\n\n\t\tthis.formBuilder = this.view.modelBuilder.formContainer()\n\t\t\t.withFormItems(\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\tcomponent: this.loader,\n\t\t\t\t\t\ttitle: ''\n\t\t\t\t\t},\n\t\t\t\t\tthis.dataLossComponentGroup\n\t\t\t\t], {\n\t\t\t\thorizontal: true,\n\t\t\t});\n\t\tthis.form = this.formBuilder.component();\n\t\tawait this.view.initializeModel(this.form);\n\n\t\treturn true;\n\t}\n\n\tasync onPageEnter(): Promise<boolean> {\n\t\t// reset checkbox settings\n\t\tthis.formBuilder.addFormItem(this.dataLossComponentGroup, { horizontal: true, componentWidth: 400 });\n\t\tthis.dataLossCheckbox.checked = false;\n\t\tthis.dataLossCheckbox.enabled = false;\n\t\tthis.model.potentialDataLoss = false;\n\t\tthis.formBuilder.removeFormItem(this.noDataLossTextComponent);\n\n\t\tthis.loader.loading = true;\n\t\tthis.table.data = [];\n\t\tawait this.populateTable();\n\t\tthis.loader.loading = false;\n\n\t\treturn true;\n\t}\n\n\tprivate async populateTable() {\n\t\tlet report = await this.instance.generateDeployPlan();\n\t\tlet result = this.parseXml(report);\n\n\t\tthis.table.updateProperties({\n\t\t\tdata: this.getColumnData(result),\n\t\t\tcolumns: this.getTableColumns(result.dataLossAlerts.size > 0),\n\t\t\twidth: 875,\n\t\t\theight: 300\n\t\t});\n\n\t\tif (result.dataLossAlerts.size > 0) {\n\t\t\t// update message to list how many operations could result in data loss\n\t\t\tthis.dataLossText.updateProperties({\n\t\t\t\tvalue: loc.dataLossTextWithCount(result.dataLossAlerts.size)\n\t\t\t});\n\t\t\tthis.dataLossCheckbox.enabled = true;\n\t\t\tthis.model.potentialDataLoss = true;\n\t\t} else {\n\t\t\t// check checkbox to enable Next button and remove checkbox because there won't be any possible data loss\n\t\t\tthis.dataLossCheckbox.checked = true;\n\t\t\tthis.formBuilder.removeFormItem(this.dataLossComponentGroup);\n\t\t\tthis.formBuilder.addFormItem(this.noDataLossTextComponent, { componentWidth: 300, horizontal: true });\n\t\t}\n\t}\n\n\tprivate async createDataLossCheckbox(): Promise<azdata.FormComponent> {\n\t\tthis.dataLossCheckbox = this.view.modelBuilder.checkBox()\n\t\t\t.withValidation(component => component.checked === true)\n\t\t\t.withProperties({\n\t\t\t\tlabel: loc.proceedDataLossMessage,\n\t\t\t}).component();\n\n\t\treturn {\n\t\t\tcomponent: this.dataLossCheckbox,\n\t\t\ttitle: '',\n\t\t\trequired: true\n\t\t};\n\t}\n\n\tprivate async createNoDataLossText(): Promise<azdata.FormComponent> {\n\t\tlet noDataLossText = this.view.modelBuilder.text()\n\t\t\t.withProperties({\n\t\t\t\tvalue: loc.noDataLossMessage\n\t\t\t}).component();\n\n\t\treturn {\n\t\t\ttitle: '',\n\t\t\tcomponent: noDataLossText\n\t\t};\n\t}\n\n\tprivate async createDataLossComponents(): Promise<azdata.FormComponentGroup> {\n\t\tlet dataLossComponent = await this.createDataLossCheckbox();\n\t\tthis.dataLossText = this.view.modelBuilder.text()\n\t\t\t.withProperties({\n\t\t\t\tvalue: loc.dataLossMessage\n\t\t\t}).component();\n\n\t\treturn {\n\t\t\ttitle: '',\n\t\t\tcomponents: [\n\t\t\t\t{\n\t\t\t\t\tcomponent: this.dataLossText,\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\tcomponentWidth: 400,\n\t\t\t\t\t\thorizontal: true\n\t\t\t\t\t},\n\t\t\t\t\ttitle: ''\n\t\t\t\t},\n\t\t\t\tdataLossComponent\n\t\t\t]\n\t\t};\n\t}\n\n\tprivate getColumnData(result: DeployPlanResult): Array<Array<string>> {\n\t\t// remove data loss column data if there aren't any alerts\n\t\tlet columnData = result.columnData;\n\t\tif (result.dataLossAlerts.size === 0) {\n\t\t\tcolumnData.forEach(entry => {\n\t\t\t\tentry.shift();\n\t\t\t});\n\t\t}\n\t\treturn columnData;\n\t}\n\n\tprivate getTableColumns(dataloss: boolean): azdata.TableColumn[] {\n\t\tlet columns: azdata.TableColumn[] = [\n\t\t\t{\n\t\t\t\tvalue: loc.operation,\n\t\t\t\twidth: 75,\n\t\t\t\tcssClass: 'align-with-header',\n\t\t\t\ttoolTip: loc.operationTooltip\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: loc.type,\n\t\t\t\twidth: 100,\n\t\t\t\tcssClass: 'align-with-header',\n\t\t\t\ttoolTip: loc.typeTooltip\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: loc.object,\n\t\t\t\twidth: 300,\n\t\t\t\tcssClass: 'align-with-header',\n\t\t\t\ttoolTip: loc.objectTooltip\n\t\t\t}];\n\n\t\tif (dataloss) {\n\t\t\tcolumns.unshift(\n\t\t\t\t{\n\t\t\t\t\tvalue: loc.dataLoss,\n\t\t\t\t\twidth: 50,\n\t\t\t\t\tcssClass: 'center-align',\n\t\t\t\t\ttoolTip: loc.dataLossTooltip\n\t\t\t\t});\n\t\t}\n\t\treturn columns;\n\t}\n\n\tprivate parseXml(report: string): DeployPlanResult {\n\t\tlet operations = new Array<TableObject>();\n\t\tlet dataLossAlerts = new Set<string>();\n\n\t\tlet currentOperation = '';\n\t\tlet dataIssueAlert = false;\n\t\tlet currentReportSection: deployPlanXml;\n\t\tlet currentTableObj: TableObject;\n\t\tlet p = new parser.Parser({\n\t\t\tonopentagname(name) {\n\t\t\t\tif (name === deployPlanXml.AlertElement) {\n\t\t\t\t\tcurrentReportSection = deployPlanXml.AlertElement;\n\t\t\t\t} else if (name === deployPlanXml.OperationElement) {\n\t\t\t\t\tcurrentReportSection = deployPlanXml.OperationElement;\n\t\t\t\t} else if (name === deployPlanXml.ItemElement) {\n\t\t\t\t\tcurrentTableObj = new TableObject();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonattribute: function (name, value) {\n\t\t\t\tif (currentReportSection === deployPlanXml.AlertElement) {\n\t\t\t\t\tswitch (name) {\n\t\t\t\t\t\tcase deployPlanXml.NameAttribute: {\n\t\t\t\t\t\t\t// only care about showing data loss alerts\n\t\t\t\t\t\t\tif (value === deployPlanXml.DataIssueAttribute) {\n\t\t\t\t\t\t\t\tdataIssueAlert = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase deployPlanXml.IdAttribute: {\n\t\t\t\t\t\t\tif (dataIssueAlert) {\n\t\t\t\t\t\t\t\tdataLossAlerts.add(value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (currentReportSection === deployPlanXml.OperationElement) {\n\t\t\t\t\tswitch (name) {\n\t\t\t\t\t\tcase deployPlanXml.NameAttribute: {\n\t\t\t\t\t\t\tcurrentOperation = value;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase deployPlanXml.ValueAttribute: {\n\t\t\t\t\t\t\tcurrentTableObj.object = value;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase deployPlanXml.TypeAttribute: {\n\t\t\t\t\t\t\tcurrentTableObj.type = value;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase deployPlanXml.IdAttribute: {\n\t\t\t\t\t\t\tif (dataLossAlerts.has(value)) {\n\t\t\t\t\t\t\t\tcurrentTableObj.dataloss = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tonclosetag: function (name) {\n\t\t\t\tif (name === deployPlanXml.ItemElement) {\n\t\t\t\t\tcurrentTableObj.operation = currentOperation;\n\t\t\t\t\toperations.push(currentTableObj);\n\t\t\t\t}\n\t\t\t}\n\t\t}, { xmlMode: true, decodeEntities: true });\n\t\tp.parseChunk(report);\n\n\t\tlet data = new Array<Array<string>>();\n\t\toperations.forEach(operation => {\n\t\t\tlet isDataLoss = operation.dataloss ? '⚠️' : '';\n\t\t\tdata.push([isDataLoss, operation.operation, operation.type, operation.object]);\n\t\t});\n\n\t\treturn {\n\t\t\tcolumnData: data,\n\t\t\tdataLossAlerts: dataLossAlerts\n\t\t};\n\t}\n\n\tpublic setupNavigationValidator() {\n\t\tthis.instance.registerNavigationValidator(() => {\n\t\t\treturn true;\n\t\t});\n\t}\n}\n"]}