{"version":3,"file":"deployConfigPage.js","sourceRoot":"../../../src","sources":["wizard/pages/deployConfigPage.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the Source EULA. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as azdata from 'azdata';\nimport * as vscode from 'vscode';\nimport * as loc from '../../localizedConstants';\nimport { DacFxDataModel } from '../api/models';\nimport { DataTierApplicationWizard, DeployOperationPath, Operation, DeployNewOperationPath, PageName } from '../dataTierApplicationWizard';\nimport { DacFxConfigPage } from '../api/dacFxConfigPage';\nimport { generateDatabaseName } from '../api/utils';\n\nexport class DeployConfigPage extends DacFxConfigPage {\n\tprivate databaseDropdownComponent: azdata.FormComponent;\n\tprivate databaseComponent: azdata.FormComponent;\n\tprivate formBuilder: azdata.FormBuilder;\n\tprivate form: azdata.FormContainer;\n\t// variables for radio buttons to update them if no databases exist.\n\tprivate upgradeRadioButton: azdata.RadioButtonComponent;\n\tprivate newRadioButton: azdata.RadioButtonComponent;\n\n\tpublic constructor(instance: DataTierApplicationWizard, wizardPage: azdata.window.WizardPage, model: DacFxDataModel, view: azdata.ModelView) {\n\t\tsuper(instance, wizardPage, model, view);\n\t\tthis.fileExtension = '.dacpac';\n\t}\n\n\tasync start(): Promise<boolean> {\n\t\tlet serverComponent = await this.createServerDropdown(true);\n\t\tlet fileBrowserComponent = await this.createFileBrowser();\n\t\tthis.databaseComponent = await this.createDatabaseTextBox(loc.databaseName);\n\t\tthis.databaseDropdownComponent = await this.createDeployDatabaseDropdown();\n\t\tthis.databaseDropdownComponent.title = loc.databaseName;\n\t\tlet radioButtons = await this.createRadiobuttons();\n\n\t\tthis.formBuilder = this.view.modelBuilder.formContainer()\n\t\t\t.withFormItems(\n\t\t\t\t[\n\t\t\t\t\tfileBrowserComponent,\n\t\t\t\t\tserverComponent,\n\t\t\t\t\tradioButtons,\n\t\t\t\t\tthis.databaseDropdownComponent\n\t\t\t\t], {\n\t\t\t\thorizontal: true,\n\t\t\t\tcomponentWidth: 400\n\t\t\t});\n\n\t\tthis.form = this.formBuilder.component();\n\t\tawait this.view.initializeModel(this.form);\n\t\treturn true;\n\t}\n\n\tasync onPageEnter(): Promise<boolean> {\n\t\tlet r1 = await this.populateServerDropdown();\n\t\tlet r2 = await this.populateDatabaseDropdown();\n\t\t// get existing database values to verify if new database name is valid\n\t\tawait this.getDatabaseValues();\n\t\treturn r1 && r2;\n\t}\n\n\tprivate async createFileBrowser(): Promise<azdata.FormComponent> {\n\t\tthis.createFileBrowserParts();\n\n\t\tthis.fileButton.onDidClick(async (click) => {\n\t\t\tlet fileUris = await vscode.window.showOpenDialog(\n\t\t\t\t{\n\t\t\t\t\tcanSelectFiles: true,\n\t\t\t\t\tcanSelectFolders: false,\n\t\t\t\t\tcanSelectMany: false,\n\t\t\t\t\tdefaultUri: vscode.Uri.file(this.getRootPath()),\n\t\t\t\t\topenLabel: loc.open,\n\t\t\t\t\tfilters: {\n\t\t\t\t\t\t'dacpac Files': ['dacpac'],\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif (!fileUris || fileUris.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet fileUri = fileUris[0];\n\t\t\tthis.fileTextBox.value = fileUri.fsPath;\n\t\t\tthis.model.filePath = fileUri.fsPath;\n\t\t});\n\n\t\tthis.fileTextBox.onTextChanged(async () => {\n\t\t\tthis.model.filePath = this.fileTextBox.value;\n\t\t\tthis.databaseTextBox.value = generateDatabaseName(this.model.filePath);\n\t\t\tif (!this.model.upgradeExisting) {\n\t\t\t\tthis.model.database = this.databaseTextBox.value;\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tcomponent: this.fileTextBox,\n\t\t\ttitle: loc.fileLocation,\n\t\t\tactions: [this.fileButton]\n\t\t};\n\t}\n\n\tprivate createRadiobuttons(): azdata.FormComponent {\n\t\tlet upgradeRadioButton = this.view.modelBuilder.radioButton()\n\t\t\t.withProperties({\n\t\t\t\tname: 'updateExistingOrCreateNew',\n\t\t\t\tlabel: loc.upgradeExistingDatabase,\n\t\t\t}).component();\n\n\t\tlet newRadioButton = this.view.modelBuilder.radioButton()\n\t\t\t.withProperties({\n\t\t\t\tname: 'updateExistingOrCreateNew',\n\t\t\t\tlabel: loc.newDatabase,\n\t\t\t}).component();\n\n\t\tupgradeRadioButton.onDidClick(() => {\n\n\t\t\tthis.updateUpgradeRadioButton();\n\t\t});\n\n\t\tnewRadioButton.onDidClick(() => {\n\n\t\t\tthis.updateNewRadioButton();\n\t\t});\n\n\t\t// Saving instances of the radio buttons to update if databases don't exist\n\t\tthis.upgradeRadioButton = upgradeRadioButton;\n\t\tthis.newRadioButton = newRadioButton;\n\n\t\t//Initialize with upgrade existing true\n\t\tupgradeRadioButton.checked = true;\n\t\tthis.model.upgradeExisting = true;\n\n\t\t// Display the radio buttons on the window\n\t\treturn this.createRadioButtonFlexContainer(upgradeRadioButton, newRadioButton);\n\t}\n\n\tprotected async createDeployDatabaseDropdown(): Promise<azdata.FormComponent> {\n\t\tconst targetDatabaseTitle = loc.databaseName;\n\t\tthis.databaseDropdown = this.view.modelBuilder.dropDown().withProperties({\n\t\t\tariaLabel: targetDatabaseTitle\n\t\t}).component();\n\n\t\t//Handle database changes\n\t\tthis.databaseDropdown.onValueChanged(() => {\n\t\t\tconst databaseDropdownValue: string = this.databaseDropdown.value as string;\n\t\t\tif (!databaseDropdownValue) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.model.database = databaseDropdownValue;\n\t\t});\n\n\t\tthis.databaseLoader = this.view.modelBuilder.loadingComponent().withItem(this.databaseDropdown).withProperties({\n\t\t\trequired: true\n\t\t}).component();\n\n\t\treturn {\n\t\t\tcomponent: this.databaseLoader,\n\t\t\ttitle: targetDatabaseTitle\n\t\t};\n\t}\n\n\tprotected async populateDatabaseDropdown(): Promise<boolean> {\n\t\tthis.databaseLoader.loading = true;\n\t\tthis.databaseDropdown.updateProperties({ values: [] });\n\t\tif (!this.model.server) {\n\t\t\tthis.databaseLoader.loading = false;\n\t\t\treturn false;\n\t\t}\n\t\tlet values = await this.getDatabaseValues();\n\n\t\tthis.databaseDropdown.updateProperties({\n\t\t\tvalues: values\n\t\t});\n\n\t\tthis.databaseLoader.loading = false;\n\n\t\t/*\n\t\tCheck to avoid having the new radio button checked by default.\n\t\t*/\n\t\tif (this.newRadioButton.checked) {\n\t\t\tthis.newRadioButton.checked = values.length === 0 ? true : false;\n\t\t\tthis.upgradeRadioButton.enabled = values.length === 0 ? false : true;\n\t\t}\n\n\t\t/*\n\t\tCheck if databases exist for the selected server.\n\t\t*/\n\t\tif (values.length === 0) {\n\t\t\t/*\n\t\t\tSet the upgrade radio button to be disabled and call the updateNewRadioButton function\n\t\t\tto update the new radio button accordingly.\n\t\t\t*/\n\t\t\tthis.upgradeRadioButton.enabled = false;\n\t\t\tthis.newRadioButton.checked = true;\n\t\t\tthis.updateNewRadioButton();\n\t\t}\n\t\telse {\n\t\t\t/*\n\t\t\tSet the upgrade radio button to be enabled and call the updateUpgradeRadioButton function\n\t\t\tto update the upgrade radio button accordingly.\n\t\t\t*/\n\t\t\tthis.upgradeRadioButton.enabled = true;\n\t\t\tthis.updateUpgradeRadioButton();\n\t\t}\n\n\t\t//set the database to the first dropdown value if upgrading, otherwise it should get set to the textbox value\n\t\tif (this.model.upgradeExisting) {\n\t\t\tthis.model.database = values[0];\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/*\n\tFunction that is used to update the window if upgrade radio button is selected.\n\t*/\n\tprivate updateUpgradeRadioButton(): void {\n\t\tthis.model.upgradeExisting = true;\n\t\tthis.formBuilder.removeFormItem(this.databaseComponent);\n\t\tthis.formBuilder.addFormItem(this.databaseDropdownComponent, { horizontal: true, componentWidth: 400 });\n\n\t\t// add deploy plan page and remove and re-add summary page so that it has the correct page number\n\t\tif (this.instance.wizard.pages.length < 4) {\n\t\t\tthis.instance.wizard.removePage(DeployNewOperationPath.summary);\n\t\t\tlet deployPlanPage = this.instance.pages.get(PageName.deployPlan);\n\t\t\tlet summaryPage = this.instance.pages.get(PageName.summary);\n\t\t\tthis.instance.wizard.addPage(deployPlanPage.wizardPage, DeployOperationPath.deployPlan);\n\t\t\tthis.instance.wizard.addPage(summaryPage.wizardPage, DeployOperationPath.summary);\n\t\t}\n\t}\n\n\t/*\n\tFunction that is used to update the window if new radio button is selected.\n\t*/\n\tprivate updateNewRadioButton(): void {\n\t\tthis.model.upgradeExisting = false;\n\t\tthis.formBuilder.removeFormItem(this.databaseDropdownComponent);\n\t\tthis.formBuilder.addFormItem(this.databaseComponent, { horizontal: true, componentWidth: 400 });\n\t\tthis.instance.setDoneButton(Operation.deploy);\n\n\t\t// remove deploy plan page and read summary page so that it has the correct page number\n\t\tif (this.instance.wizard.pages.length >= 4) {\n\t\t\tthis.instance.wizard.removePage(DeployOperationPath.summary);\n\t\t\tthis.instance.wizard.removePage(DeployOperationPath.deployPlan);\n\t\t\tlet summaryPage = this.instance.pages.get(PageName.summary);\n\t\t\tthis.instance.wizard.addPage(summaryPage.wizardPage, DeployNewOperationPath.summary);\n\t\t}\n\t}\n\n\t/*\n\tFunction to create the radio button flex container on the window.\n\t*/\n\tprivate createRadioButtonFlexContainer(upgradeRadioButton: azdata.RadioButtonComponent, newRadioButton: azdata.RadioButtonComponent): azdata.FormComponent {\n\t\tlet flexRadioButtonsModel = this.view.modelBuilder.flexContainer()\n\t\t\t.withLayout({\n\t\t\t\tflexFlow: 'row',\n\t\t\t}).withItems([\n\t\t\t\tupgradeRadioButton, newRadioButton]\n\t\t\t).component();\n\n\t\treturn {\n\t\t\tcomponent: flexRadioButtonsModel,\n\t\t\ttitle: loc.targetDatabase\n\t\t};\n\t}\n\n}\n"]}